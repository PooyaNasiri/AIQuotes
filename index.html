<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AIQuotes — 5-word Motivator</title>
    <style>
      body{font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;display:flex;min-height:100vh;align-items:center;justify-content:center;background:linear-gradient(135deg,#07132b 0%, #081426 40%, #10243a 100%);color:#e6eef8;margin:0}
      .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:28px;border-radius:14px;box-shadow:0 10px 40px rgba(2,6,23,.7);width:min(760px,94%);text-align:center;border:1px solid rgba(255,255,255,0.03)}
      h1{margin:0 0 12px 0;font-size:20px;letter-spacing:.6px}
      .controls{display:flex;flex-direction:column;gap:10px;align-items:center;margin-bottom:14px}
      .control-row{display:flex;gap:12px;align-items:center}
      .control-row.small{font-size:13px;color:#9fb0d3}
      .label{font-weight:600}
      .vertical-number{display:flex;flex-direction:column;align-items:center;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:6px;border-radius:12px;border:1px solid rgba(255,255,255,0.04);width:88px;transition:transform .28s cubic-bezier(.2,.9,.2,1)}
      .vertical-number:hover{transform:translateY(-4px)}
      .vertical-number .arrow{background:linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));border:none;color:#cfe6ff;padding:6px 8px;font-size:12px;cursor:pointer;line-height:1;border-radius:8px;margin:6px;transition:transform .18s ease, box-shadow .18s ease}
      .vertical-number .arrow:hover{transform:translateY(-2px);box-shadow:0 6px 18px rgba(124,58,237,.08)}
      .vertical-number input[type=number]{width:64px;background:transparent;border:none;color:#e6eef8;text-align:center;font-size:20px;-moz-appearance:textfield;transition:transform .28s cubic-bezier(.2,.9,.2,1), color .18s}
      .vertical-number input[type=number].num-animate{animation:numPop .36s ease}
      @keyframes numPop{0%{transform:translateY(-6px) scale(.95);opacity:.6}50%{transform:translateY(3px) scale(1.06);opacity:1}100%{transform:translateY(0) scale(1)} }
      input[type=number]::-webkit-outer-spin-button,input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}
      button#generate{position:relative;overflow:hidden;background:linear-gradient(90deg,#7c3aed,#2dd4bf);border:none;color:#041025;padding:12px 22px;border-radius:14px;font-weight:800;cursor:pointer;box-shadow:0 10px 30px rgba(124,58,237,.14);transition:transform .12s ease, box-shadow .12s ease}
      button#generate:active{transform:translateY(1px) scale(.996)}
      button#generate .btn-text{display:inline-block;transition:transform .18s cubic-bezier(.2,.9,.2,1)}
      button#generate .spinner{position:absolute;right:12px;top:50%;transform:translateY(-50%) scale(.6);width:14px;height:14px;border-radius:50%;box-shadow:inset 0 0 0 3px rgba(255,255,255,0.15);opacity:0;transition:opacity .18s, transform .18s}
      button#generate.loading{box-shadow:0 14px 40px rgba(45,212,191,.08);transform:translateY(-2px)}
      button#generate.loading .spinner{opacity:1;transform:translateY(-50%) scale(1);animation:spin 900ms linear infinite}
      @keyframes spin{0%{transform:translateY(-50%) rotate(0)}100%{transform:translateY(-50%) rotate(360deg)}}
      #quote{font-size:22px;margin:18px 0;line-height:1.3;color:#e8f6ff;min-height:56px;transition:opacity .22s ease, transform .22s cubic-bezier(.2,.9,.2,1)}
      #quote.out{opacity:0;transform:translateY(8px) scale(.98)}
      #quote.in{opacity:1;transform:translateY(0) scale(1)}

      /* small decorative shimmer when generating */
      .shimmer{position:relative;overflow:hidden}
      .shimmer:after{content:'';position:absolute;left:-40%;top:0;width:40%;height:100%;transform:skewX(-18deg);background:linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.07), rgba(255,255,255,0));opacity:0;transition:opacity .12s}
      button#generate.loading ~ .quote.shimmer:after{opacity:1;animation:shimmer 900ms linear}
      @keyframes shimmer{0%{left:-40%}100%{left:140%}}
      footer{font-size:12px;color:#9fb0d3;margin-top:14px}
      @media (max-width:520px){.control-row{flex-direction:column}}
    </style>
  </head>
  <body>
    <main class="card">
      <div id="root"></div>
    </main>

    <!-- React + Babel (CDN) -->
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <!-- Small React app implementing a fancy Counter and DecryptedText reveal -->
    <script type="text/babel">
      const { useState, useEffect, useRef } = React;

      // Simple DecryptedText: reveals text character-by-character with 'decrypt' effect
      function DecryptedText({ text, reveal }){
        const [out, setOut] = useState('');
        const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
        useEffect(()=>{
          if(!reveal){ setOut(text); return; }
          let cancelled = false;
          const target = text || '';
          const len = target.length;
          let frame = 0;
          const steps = 18 + Math.floor(len/2);
          const interval = 28;
          const tm = setInterval(()=>{
            frame++;
            let s = '';
            for(let i=0;i<len;i++){
              if(i < Math.floor((frame/steps)*len)) s += target[i];
              else s += alphabet[Math.floor(Math.random()*alphabet.length)];
            }
            if(!cancelled) setOut(s);
            if(frame >= steps){
              if(!cancelled) setOut(target);
              clearInterval(tm);
            }
          }, interval);
          return ()=>{ cancelled = true; clearInterval(tm); };
        }, [text, reveal]);
        return (<div className="quote shimmer in" aria-live="polite">{out}</div>);
      }

      // Fancy counter inspired by reactbits counter
      function FancyCounter({ value, onChange }){
        const [n, setN] = useState(value);
        useEffect(()=> setN(value), [value]);
        const bump = (v)=>{ const nv = Math.max(3, Math.min(20, v)); setN(nv); onChange && onChange(nv); };
        return (
          <div className="control-row" style={{alignItems:'center'}}>
            <label className="label" style={{marginRight:10}}>Words</label>
            <div className="vertical-number">
              <button className="arrow" onClick={()=>bump(n+1)} aria-label="Increase">▲</button>
              <input className="num" type="number" value={n} min={3} max={20} onChange={(e)=>bump(Number(e.target.value)||3)} />
              <button className="arrow" onClick={()=>bump(n-1)} aria-label="Decrease">▼</button>
            </div>
          </div>
        );
      }

      function App(){
        const [n, setN] = useState(5);
        const [quote, setQuote] = useState('Click generate to receive a motivational sentence.');
        const [loading, setLoading] = useState(false);
        const [reveal, setReveal] = useState(false);
        const GAS_URL = 'https://script.google.com/macros/s/AKfycbxvu4pgPyvx-N3FbGptzCzr411tmUdjnEZUzLr9XO0Bq5wG5r48hFTY0x7d7xkFittp0Q/exec';

        async function generate(){
          setLoading(true); setReveal(false);
          try{
            const url = GAS_URL + (GAS_URL.indexOf('?')===-1?'?':'&') + '_ts=' + Date.now() + '&n=' + encodeURIComponent(n);
            const res = await fetch(url, { cache: 'no-store' });
            if(!res.ok) throw new Error('Network ' + res.status);
            const data = await res.json();
            setQuote(data && data.quote ? data.quote : 'No quote returned.');
            // reveal with decrypted animation
            setTimeout(()=> setReveal(true), 80);
          }catch(err){ setQuote('Error: ' + (err.message||err)); setReveal(true); }
          finally{ setLoading(false); }
        }

        return (
          <div>
            <h1 id="title">Motivator — animated</h1>
            <div className="controls">
              <FancyCounter value={n} onChange={setN} />
            </div>

            <DecryptedText text={quote} reveal={reveal} />

            <div style={{marginTop:8}}>
              <button id="generate" className={loading? 'loading' : ''} onClick={generate}>
                <span className="btn-text">{loading? 'Generating...' : 'Generate'}</span>
                <span className="spinner" aria-hidden="true" style={{display: loading? 'inline-block':'none'}}></span>
              </button>
            </div>

            <footer style={{marginTop:14,fontSize:12,color:'#9fb0d3'}}>Powered by a Google Apps Script backend + OpenAI API</footer>
          </div>
        );
      }

      ReactDOM.createRoot(document.getElementById('root')).render(<App />);
    </script>
  </body>
</html>
